<!DOCTYPE html>
<meta name="viewport" content="width=device-width">
<html lang="en">
<style>
    body {
        height: 100vh;
        width: 100vw;
        margin: 0;
        padding: 0;
        background-image: url('../image/img_background.png');
        background-repeat: no-repeat;
        background-attachment: fixed;
        /*background-size: 100% 100%;*/
    }
    .verticalclass{
        height:80%;
        width: 90%;
        /*margin-left: 5%;*/
        /*margin-right: 5%;*/
        transform: translateX(5%);
        display: inline-block;
        position: relative;
    }
    table tbody tr td {
        /*border: 1px solid black;*/
        /*height:100px;*/
        /*width: 70px;*/
        /*height:25%;*/
        width: 10%;

        /*transform: translateY(20%);*/
        /*transform: translateX(50%);*/
        /*margin-top: 94px;*/
        text-align: center;

    }

    /*.table tbody tr td:hover {*/
    /*    !*border: 1px solid black;*!*/
    /*    !*height:100px;*!*/
    /*    !*width: 70px;*!*/
    /*    !*height:25%;*!*/
    /*    width: 10%;*/
    /*    background-color:white;*/
    /*    !*transform: translateY(20%);*!*/
    /*    !*transform: translateX(50%);*!*/
    /*    !*margin-top: 94px;*!*/
    /*    text-align: center;*/

    /*}*/
</style>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="../glitterBundle/ControlInstance.js"></script>
<body>
<div class="verticalclass">
    <table class="table">
        <!--    onclick="ShowTire()"-->
        <tbody id="tbody"></tbody>
    </table>
</div>
</body>
</html>
<script>
    var data = {};
    data.Q1=['../image/icon_tire_number_ok.png','../image/icon_tire_number_normal.png'];
    data.Q2=["111111","222222"];
    data.Q3=['../image/icon_tire_number_fail.png','../image/icon_tire_number_select.png'];
    data.Q4=["333333","444444"];
    let formmatedData = formatAdapter(data)
    var tbody = document.getElementById('tbody');

    let rowHtmls = formmatedData.map((item) => {
        //style="background-image: url();"
        var html = ''
        var htmlimg =  '<div>'+
            // '<td top="200px"></td>'+
            // '<td top="200px"></td>'+
            // '<td top="200px"><img width="150px" height="150px" style="background-image: url("+item[1]+");"></td>'+
            '<td  id='+item[0].replace("../image/","")+' top="200px"><img width="150px" height="150px"  src='+item[0]+'></td>'+
            '<td  id='+item[1].replace("../image/","")+' top="200px"><img width="150px" height="150px"  src='+item[1]+'></td>'+
            '</div>'
        var htmltext = '<tr>' +
            '<td style="color:white;" width="100px" height="10px">'+item[0]+'</td>' +
            '<td style="color:white;" width="100px" height="10px">'+item[1]+'</td>' +
            '</tr>'

        if(item[0].indexOf('.png')!=-1 || item[1].indexOf('.png')!=-1){
            console.log(item[0]);
            html = htmlimg
        }else{
            console.log(item[0]);
            html = htmltext
        }

        let row =html

        // row += item[1].slice(1).reduce((pre, cur) => {
        //     return pre + '<tr><td>'+cur+'</td></tr>'
        // }, '')
        return row
    })
    tbody.innerHTML += rowHtmls.reduce((pre, cur) => {
        return pre+cur
    }, '')
    setOnClick()

    $(document).ready(function(){
        $("td").hover(function(){
            // if(this.innerHTML==data.Q2[0] || this.innerHTML.indexOf(data.Q1[0])!=-1){
            //     //data.Q2[0]='../image/icon_tire_number_ok.png'
            //     $(this).css("background-image",'url'+'(../image/icon_tire_number_ok.png)');
            //
            // }else if(this.innerHTML==data.Q2[1] ||  this.innerHTML.indexOf(data.Q1[1])!=-1){
            //     //data.Q2[1]='../image/icon_tire_number_ok.png'
            //     //$(this).css("src",'../image/icon_tire_number_ok.png')
            //     $(this).css("background-image",'url'+'(../image/icon_tire_number_ok.png)');
            // }else if(this.innerHTML==data.Q4[0] ||  this.innerHTML.indexOf(data.Q3[0])!=-1){
            //     //data.Q4[0]='../image/icon_tire_number_ok.png'
            //     $(this).css("background-image",'url'+'(../image/icon_tire_number_ok.png)');
            // }else if(this.innerHTML==data.Q4[1] ||  this.innerHTML.indexOf(data.Q3[1])!=-1){
            //     //data.Q4[1]='../image/icon_tire_number_ok.png'
            //     $(this).css("background-image",'url'+'(../image/icon_tire_number_ok.png)');
            // }

            // updateUI()
            // setOnClick()
            //$(this).css("background-image",'url'+'(../image/img_background.png)');


            if(this.innerHTML.indexOf("image")!=-1){
                console.log("hover1:"+this.innerHTML);
                $(this).html('<img id='+this.id+' width="150px" height="150px"  src='+"../image/icon_tire_number_ok.png"+'>');
            }
        }, function(){
            //if(this.innerHTML.index("image")!=-1) {

                if (this.id.toString().indexOf("icon_tire_number_ok.png") != -1) {
                    //data.Q2[0]='../image/icon_tire_number_ok.png'
                    //$(this).css("background-image",'url'+'(../image/icon_tire_number_ok.png)');
                    $(this).html('<img id='+this.id.toString()+' width="150px" height="150px"  src=' + "../image/icon_tire_number_ok.png" + '>');
                } else if (this.id.toString().indexOf("icon_tire_number_normal.png") != -1) {
                    //data.Q2[1]='../image/icon_tire_number_normal.png'
                    //$(this).css("background-image",'url'+'(../image/icon_tire_number_normal.png)');
                    $(this).html('<img id='+this.id.toString()+' width="150px" height="150px"  src=' + "../image/icon_tire_number_normal.png" + '>');
                } else if (this.id.toString().indexOf("icon_tire_number_fail.png") != -1) {
                    //data.Q4[0]='../image/icon_tire_number_fail.png'
                    //$(this).css("background-image",'url'+'(../image/icon_tire_number_fail.png)');
                    $(this).html('<img id='+this.id.toString()+' width="150px" height="150px"  src=' + "../image/icon_tire_number_fail.png" + '>');
                } else if (this.id.toString().indexOf("icon_tire_number_select.png") != -1) {
                    //data.Q4[1]='../image/icon_tire_number_select.png'
                    //$(this).css("background-image",'url'+'(../image/icon_tire_number_select.png)');
                    $(this).html('<img id='+this.id.toString()+' width="150px" height="150px"  src=' + "../image/icon_tire_number_select.png" + '>');
                }
            //}
            console.log("hover2:"+this.innerHTML+","+this.id.toString());
            // updateUI()
            // setOnClick()
            //$(this).css("background-image", 'url'+'(../image/icon_tire_number_ok.png)');
            // if(this.innerHTML.indexOf("image")!=-1){
            //     $(this).html('<img width="150px" height="150px"  src='+"../image/img_background.png"+'>');
            // }
        });
    });

    function formatAdapter (data) {
        return Object.entries(data).map((item) => {
            // let newItem = {}
            // newItem[item[0]] = {'options': item[1].slice(0, item[1].length -1),
            //     'answer': item[-1]} // assuming the last element is the answer, [0:last] is the options
            return [item[1][0], item[1][1]]
        })
    }

    function updateUI(){
        tbody.innerHTML = "";
        formmatedData = formatAdapter(data)
        let rowHtmls = formmatedData.map((item) => {
            //style="background-image: url();"
            var html = ''
            var htmlimg =  '<div>'+
                // '<td top="200px"><img width="150px" height="150px" style="background-image: url("+item[0]+");"></td>'+
                // '<td top="200px"><img width="150px" height="150px" style="background-image: url("+item[1]+");"></td>'+
                '<td top="200px"><img width="150px" height="150px"  src='+item[0]+'></td>'+
                '<td top="200px"><img width="150px" height="150px"  src='+item[1]+'></td>'+
                '</div>'
            var htmltext = '<tr>' +
                '<td style="color:white;" width="100px" height="10px">'+item[0]+'</td>' +
                '<td style="color:white;" width="100px" height="10px">'+item[1]+'</td>' +
                '</tr>'

            if(item[0].indexOf('.png')!=-1 || item[1].indexOf('.png')!=-1){
                console.log(item[0]);
                html = htmlimg
            }else{
                console.log(item[0]);
                html = htmltext
            }

            let row =html

            // row += item[1].slice(1).reduce((pre, cur) => {
            //     return pre + '<tr><td>'+cur+'</td></tr>'
            // }, '')
            return row
        })
        tbody.innerHTML += rowHtmls.reduce((pre, cur) => {
            return pre+cur
        }, '')
    }

    function setOnClick(){
        if (tbody != null) {
            for (var i = 0; i < tbody.rows.length; i++) {
                for (var j = 0; j < tbody.rows[i].cells.length; j++)

                    tbody.rows[i].cells[j].onclick = function () {
                        //data[i][j]
                        console.log(this.innerHTML + ',' + this.innerHTML.indexOf(data.Q1[0]))
                        if(this.innerHTML==data.Q2[0] || this.innerHTML.indexOf(data.Q1[0])!=-1){
                            glitter.changePage('main/CarSet.html',"CarSet",false,{});
                        }else if(this.innerHTML==data.Q2[1] ||  this.innerHTML.indexOf(data.Q1[1])!=-1){

                        }else if(this.innerHTML==data.Q4[0] ||  this.innerHTML.indexOf(data.Q3[0])!=-1){

                        }else if(this.innerHTML==data.Q4[1] ||  this.innerHTML.indexOf(data.Q3[1])!=-1){

                        }

                        //this.innerHTML = tableText(this.innerHTML);
                        //this.style.backgroundColor = "Red"
                    };
            }
        }
    }


</script>